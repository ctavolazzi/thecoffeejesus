<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coffee Jesus Coffee - Brewing Divine Opportunities</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        coffee: {
                            100: '#F3E8D6',
                            200: '#E6D0B5',
                            300: '#C8A780',
                            400: '#A67C52',
                            500: '#8D6E63',
                            600: '#6D4C41',
                            700: '#5D4037',
                            800: '#4E342E',
                            900: '#3E2723',
                        },
                    },
                    fontFamily: {
                        serif: ['Playfair Display', 'serif'],
                        sans: ['Poppins', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .float { animation: float 6s ease-in-out infinite; }

        .coffee-bean {
            position: absolute;
            width: 20px;
            height: 30px;
            background-color: #6D4C41;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            opacity: 0.7;
            animation: fallAnimation linear infinite;
            animation-delay: calc(var(--delay) * -1s); /* Negative delay to start sooner */
        }
        @keyframes fallAnimation {
            0% { transform: translateY(-5vh) rotate(0deg); }
            100% { transform: translateY(105vh) rotate(360deg); }
        }
        .dark .coffee-bean { background-color: #A67C52; }

        #falling-beans-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
            overflow: hidden;
        }

        .section-transition {
            transition: all 0.3s ease-in-out;
        }
        .section-transition:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .sticky-nav {
            position: sticky;
            top: 64px;
            z-index: 20;
            backdrop-filter: blur(5px);
            background-color: rgba(255, 255, 255, 0.8);
        }
        .dark .sticky-nav {
            background-color: rgba(30, 41, 59, 0.8);
        }

        .section-padding {
            scroll-margin-top: 128px;
        }

        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: 0 0; }
        }
        .shimmer-text {
            background-size: 200% auto;
            color: transparent;
            -webkit-background-clip: text;
            background-clip: text;
            animation: shimmer 5s linear infinite;
        }
        .light .shimmer-text {
            background-image: linear-gradient(90deg, #4f46e5 0%, #818cf8 20%, #4f46e5 40%, #818cf8 60%, #4f46e5 80%, #818cf8 100%);
        }
        .dark .shimmer-text {
            background-image: linear-gradient(90deg, #4f46e5 0%, #818cf8 10%, #ffffff 20%, #6366f1 30%, #4f46e5 40%, #818cf8 50%, #ffffff 60%, #6366f1 70%, #4f46e5 80%, #818cf8 90%, #ffffff 100%);
        }

        .main-navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 80px; /* Adjust this to match your navbar height */
        }

        .page-title-section {
            margin-top: 4rem; /* Increase space below main navbar */
            margin-bottom: 3rem; /* Increase space above secondary nav */
        }

        .page-title {
            font-size: 4rem; /* Keep large font size */
            margin-bottom: 1rem; /* Space above subtitle */
        }

        .page-subtitle {
            font-size: 1.5rem;
        }

        .secondary-nav {
            padding: 1rem 0; /* Add some vertical padding to secondary nav */
        }
    </style>
</head>
<body class="font-sans bg-coffee-100 dark:bg-coffee-900 text-coffee-800 dark:text-coffee-100 transition-colors duration-200">
    <div id="falling-beans-container"></div>
    <div id="navbar-placeholder"></div>

    <main class="max-w-4xl mx-auto px-4 py-8 space-y-16">
        <div class="page-title-section">
            <h1 class="page-title text-5xl sm:text-6xl font-bold font-serif text-coffee-700 dark:text-coffee-300 leading-tight shimmer-text">
                Coffee Jesus Coffee
            </h1>
            <p class="page-subtitle text-xl text-coffee-600 dark:text-coffee-400 font-semibold">Brewing Divine Opportunities - Coming Soon!</p>
        </div>

        <!-- Move the waitlist section up, right after the title -->
        <section id="waitlist" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 text-center font-serif">Join Our Exclusive Waitlist</h2>
            <p class="text-center text-lg mb-6 text-coffee-700 dark:text-coffee-200">Be the first to experience our divine brew and get exclusive offers!</p>
            <form id="coffee-waitlist-form" class="space-y-4 max-w-md mx-auto">
                <div class="relative">
                    <input type="text" id="coffee-waitlist-name" name="name" placeholder="Your Name" required
                           class="w-full p-4 pr-12 rounded-lg border-2 border-coffee-300 dark:border-coffee-600 bg-coffee-100 dark:bg-coffee-700 text-coffee-800 dark:text-coffee-100 placeholder-coffee-400 dark:placeholder-coffee-300 focus:outline-none focus:border-coffee-500 dark:focus:border-coffee-400 transition duration-300">
                    <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-coffee-400 dark:text-coffee-300">
                        <i class="fas fa-user"></i>
                    </span>
                </div>
                <div class="relative">
                    <input type="email" id="coffee-waitlist-email" name="email" placeholder="Your Email Address" required
                           class="w-full p-4 pr-12 rounded-lg border-2 border-coffee-300 dark:border-coffee-600 bg-coffee-100 dark:bg-coffee-700 text-coffee-800 dark:text-coffee-100 placeholder-coffee-400 dark:placeholder-coffee-300 focus:outline-none focus:border-coffee-500 dark:focus:border-coffee-400 transition duration-300">
                    <span class="absolute right-4 top-1/2 transform -translate-y-1/2 text-coffee-400 dark:text-coffee-300">
                        <i class="fas fa-envelope"></i>
                    </span>
                </div>
                <button type="submit"
                        class="w-full bg-coffee-600 hover:bg-coffee-700 dark:bg-coffee-500 dark:hover:bg-coffee-600 text-white font-bold py-4 px-6 rounded-lg transition duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-coffee-400 dark:focus:ring-coffee-300 focus:ring-opacity-50 relative overflow-hidden group">
                    <span class="relative z-10">Join the Waitlist</span>
                    <span class="absolute top-0 left-0 w-full h-full bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"></span>
                </button>
            </form>
            <p id="coffee-waitlist-message" class="mt-4 text-center text-coffee-800 dark:text-coffee-200 font-medium"></p>
            <p class="text-center text-coffee-600 dark:text-coffee-400 mt-4">
                <span id="waitlist-count" class="font-bold text-2xl">0</span> coffee enthusiasts have already joined!
            </p>
        </section>

        <nav class="sticky-nav bg-coffee-200 dark:bg-coffee-800 p-4 rounded-lg shadow-md mb-8 z-10">
            <ul class="flex flex-wrap justify-center gap-6">
                <li><a href="#vision" class="flex items-center text-coffee-700 dark:text-coffee-300 hover:underline"><i class="fas fa-eye mr-2"></i>Our Vision</a></li>
                <li><a href="#mission" class="flex items-center text-coffee-700 dark:text-coffee-300 hover:underline"><i class="fas fa-bullseye mr-2"></i>Our Mission</a></li>
                <li><a href="#coffee" class="flex items-center text-coffee-700 dark:text-coffee-300 hover:underline"><i class="fas fa-coffee mr-2"></i>Our Coffee</a></li>
                <li><a href="#funding" class="flex items-center text-coffee-700 dark:text-coffee-300 hover:underline"><i class="fas fa-hand-holding-usd mr-2"></i>Funding Needs</a></li>
                <li><a href="#impact" class="flex items-center text-coffee-700 dark:text-coffee-300 hover:underline"><i class="fas fa-heart mr-2"></i>Your Impact</a></li>
            </ul>
        </nav>

        <section id="vision" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition section-padding">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 font-serif">Our Vision: Transform Lives with Every Cup</h2>
            <div class="flex flex-col md:flex-row items-center gap-8">
                <div class="md:w-1/2">
                    <p class="text-lg mb-4">Join us in our mission to create a positive impact through every cup of coffee. Coffee Jesus Coffee is dedicated to supporting communities and funding programs focused on literacy and socially conscious entrepreneurship.</p>
                    <p class="text-lg">We believe that coffee can be more than just a drink – it can be a force for good, bringing people together and creating opportunities for those who need it most.</p>
                </div>
                <div class="md:w-1/2">
                    <img src="/static/vision-image.jpg" alt="Coffee farm workers" class="rounded-lg shadow-md max-w-full h-auto float">
                </div>
            </div>
        </section>

        <section id="mission" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition section-padding">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 font-serif">Our Mission</h2>
            <div class="space-y-4">
                <p class="text-lg">Coffee Jesus Coffee was born of a deep passion to do good in the world. We're not rich - far from it. We are starving artists who just want to make a difference and do something meaningful, while giving back with gratitude for everyone who has supported us so far.</p>
                <p class="text-lg">As a barista for 4 years in small local coffee shops, Christopher Tavolazzi always dreamed of launching his own brand. With his social media handle, @thecoffeejesus, a nickname inspired by his work as a barista, as well as playing Jesus in "Jesus Christ Superstar", he's now turning that dream into reality.</p>
                <p class="text-lg">We're committed to donating 20% of our profits to fund community programs focused on literacy and socially conscious entrepreneurship.</p>
            </div>
        </section>

        <section id="coffee" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition section-padding">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 font-serif">Our Coffee Vision</h2>
            <div class="flex flex-col md:flex-row items-center gap-8">
                <div class="md:w-1/2">
                    <p class="text-lg mb-4">Our vision is to source coffee from small farms committed to sustainable practices. Each batch will be roasted locally to ensure the freshest and most flavorful coffee.</p>
                    <ul class="list-none mb-6 text-coffee-700 dark:text-coffee-300 space-y-3">
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Handpicked beans from sustainable farms</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Locally roasted to perfection for the freshest taste</li>
                        <li class="flex items-center"><i class="fas fa-check text-green-500 mr-3"></i>Every purchase supports our mission to create positive change</li>
                    </ul>
                    <p class="text-lg italic">We are currently exploring partnerships with local roasters to bring you the highest quality, sustainably sourced coffee.</p>
                </div>
                <div class="md:w-1/2">
                    <img src="/static/coffee-beans.jpg" alt="Fresh coffee beans" class="rounded-lg shadow-md max-w-full h-auto float">
                </div>
            </div>
        </section>

        <section id="funding" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition section-padding">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 text-center font-serif">Our Funding Progress</h2>
            <div class="mb-6">
                <div class="bg-coffee-200 dark:bg-coffee-700 rounded-full h-8 overflow-hidden">
                    <div id="progress-bar" class="progress-bar bg-gradient-to-r from-coffee-400 to-coffee-600 h-8 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <p class="text-center text-2xl font-semibold text-coffee-800 dark:text-coffee-200 mb-2">
                <span id="current-amount">$0</span> raised of <span id="goal-amount">$10,000</span> goal
            </p>
            <p class="text-center text-lg text-coffee-600 dark:text-coffee-400">Help us reach our goal and bring Coffee Jesus Coffee to life!</p>
            <div class="mt-8 text-center">
                <a href="#" class="cta-button inline-block bg-coffee-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-coffee-700 transition duration-300">
                    Support Our Mission
                </a>
            </div>
        </section>

        <section id="impact" class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition section-padding">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 text-center font-serif">Your Impact</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="text-center">
                    <i class="fas fa-book-reader text-4xl text-coffee-500 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Literacy Programs</h3>
                    <p>Funding initiatives to improve literacy rates in underserved communities.</p>
                </div>
                <div class="text-center">
                    <i class="fas fa-lightbulb text-4xl text-coffee-500 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Social Entrepreneurship</h3>
                    <p>Empowering individuals to create positive change through business.</p>
                </div>
                <div class="text-center">
                    <i class="fas fa-users text-4xl text-coffee-500 mb-4"></i>
                    <h3 class="text-xl font-semibold mb-2">Community Support</h3>
                    <p>Strengthening local communities through targeted programs and resources.</p>
                </div>
            </div>
            <p class="text-lg text-center mt-8">Your support helps us create sustainable change in communities that need it most. Thank you for joining us on this journey.</p>
        </section>

        <section class="bg-white dark:bg-coffee-800 p-8 rounded-lg shadow-md section-transition">
            <h2 class="text-3xl font-bold mb-6 text-coffee-600 dark:text-coffee-300 font-serif">Frequently Asked Questions</h2>
            <div class="space-y-4">
                <div class="border-b border-coffee-200 dark:border-coffee-700 pb-4">
                    <button class="flex justify-between items-center w-full text-left text-coffee-800 dark:text-coffee-100" onclick="toggleFAQ(this)">
                        <span class="font-semibold">How does Coffee Jesus Coffee support communities?</span>
                        <i class="fas fa-chevron-down text-coffee-600 dark:text-coffee-400"></i>
                    </button>
                    <p class="mt-2 hidden text-coffee-600 dark:text-coffee-300">We donate 20% of our profits to fund community programs focused on literacy and socially conscious entrepreneurship.</p>
                </div>
                <div class="border-b border-coffee-200 dark:border-coffee-700 pb-4">
                    <button class="flex justify-between items-center w-full text-left text-coffee-800 dark:text-coffee-100" onclick="toggleFAQ(this)">
                        <span class="font-semibold">Where does your coffee come from?</span>
                        <i class="fas fa-chevron-down text-coffee-600 dark:text-coffee-400"></i>
                    </button>
                    <p class="mt-2 hidden text-coffee-600 dark:text-coffee-300">We source our coffee beans from small, sustainable farms around the world. Each batch is carefully selected to ensure the highest quality and ethical production practices.</p>
                </div>
                <div class="border-b border-coffee-200 dark:border-coffee-700 pb-4">
                    <button class="flex justify-between items-center w-full text-left text-coffee-800 dark:text-coffee-100" onclick="toggleFAQ(this)">
                        <span class="font-semibold">When will Coffee Jesus Coffee be available for purchase?</span>
                        <i class="fas fa-chevron-down text-coffee-600 dark:text-coffee-400"></i>
                    </button>
                    <p class="mt-2 hidden text-coffee-600 dark:text-coffee-300">We're currently in the development phase and working hard to bring Coffee Jesus Coffee to market. Sign up for our newsletter to be the first to know when we launch!</p>
                </div>
                <div class="border-b border-coffee-200 dark:border-coffee-700 pb-4">
                    <button class="flex justify-between items-center w-full text-left text-coffee-800 dark:text-coffee-100" onclick="toggleFAQ(this)">
                        <span class="font-semibold">How can I support Coffee Jesus Coffee?</span>
                        <i class="fas fa-chevron-down text-coffee-600 dark:text-coffee-400"></i>
                    </button>
                    <p class="mt-2 hidden text-coffee-600 dark:text-coffee-300">You can support us by spreading the word, following us on social media, and reaching out if you have skills or resources that could help bring our vision to life. Once we launch, purchasing our coffee will directly support our mission.</p>
                </div>
                <div class="border-b border-coffee-200 dark:border-coffee-700 pb-4">
                    <button class="flex justify-between items-center w-full text-left text-coffee-800 dark:text-coffee-100" onclick="toggleFAQ(this)">
                        <span class="font-semibold">What makes Coffee Jesus Coffee unique?</span>
                        <i class="fas fa-chevron-down text-coffee-600 dark:text-coffee-400"></i>
                    </button>
                    <p class="mt-2 hidden text-coffee-600 dark:text-coffee-300">Our commitment to social impact, high-quality sustainable coffee, and our unique brand story set us apart. We're not just selling coffee; we're creating a movement for positive change.</p>
                </div>
            </div>
        </section>
    </main>

    <script src="script.js"></script>
    <script src="darkMode.js"></script>
    <script type="module">
        import supabaseClient from './supabase.js';

        function createFallingBeans() {
            const container = document.getElementById('falling-beans-container');
            const numberOfBeans = 30;

            for (let i = 0; i < numberOfBeans; i++) {
                const bean = document.createElement('div');
                bean.classList.add('coffee-bean');
                bean.style.left = `${Math.random() * 100}vw`;
                bean.style.animationDuration = `${Math.random() * 15 + 20}s`;

                // Set a custom property for delay, using a smaller range
                const delay = Math.random() * 5; // Reduced from 10 to 5
                bean.style.setProperty('--delay', delay);

                container.appendChild(bean);
            }
        }

        function animateProgressBar() {
            const progressBar = document.getElementById('progress-bar');
            const currentAmount = document.getElementById('current-amount');
            const goalAmount = document.getElementById('goal-amount');

            const goal = 10000;
            const current = 2500; // Example: 25% funded
            const percentage = (current / goal) * 100;

            progressBar.style.width = '0%';
            setTimeout(() => {
                progressBar.style.width = percentage + '%';
            }, 500);

            currentAmount.textContent = '$' + current.toLocaleString();
            goalAmount.textContent = '$' + goal.toLocaleString();
        }

        // Waitlist Form Elements
        const waitlistForm = document.getElementById('coffee-waitlist-form');
        const waitlistName = document.getElementById('coffee-waitlist-name');
        const waitlistEmail = document.getElementById('coffee-waitlist-email');
        const waitlistMessage = document.getElementById('coffee-waitlist-message');
        const waitlistCount = document.getElementById('waitlist-count');

        // Function to fetch and display waitlist count
        async function fetchWaitlistCount() {
            try {
                const { count, error } = await supabaseClient
                    .from('coffeejesuscoffee_waitlist')
                    .select('*', { count: 'exact', head: true });

                if (error) throw error;

                waitlistCount.textContent = count !== null ? count : '0';
            } catch (error) {
                console.error('Error fetching waitlist count:', error);
                waitlistCount.textContent = '0';
            }
        }

        // Initial fetch of waitlist count when the page loads
        document.addEventListener('DOMContentLoaded', fetchWaitlistCount);

        // Handle form submission
        waitlistForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            const name = waitlistName.value.trim();
            const email = waitlistEmail.value.trim();

            // Basic Validation
            if (!name || !email) {
                showMessage('Please provide both name and email.', 'error');
                return;
            }

            // Email Format Validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showMessage('Please enter a valid email address.', 'error');
                return;
            }

            try {
                const { data, error } = await supabaseClient
                    .from('coffeejesuscoffee_waitlist')
                    .insert([{ name, email }])
                    .select();

                if (error) throw error;

                waitlistForm.reset();
                showMessage('Thank you for joining the Coffee Jesus Coffee waitlist!', 'success');

                // Update the waitlist count
                fetchWaitlistCount();
            } catch (error) {
                console.error('Error inserting waitlist data:', error);
                if (error.message.includes('duplicate key value')) {
                    showMessage('This email is already registered in the waitlist.', 'error');
                } else {
                    showMessage('There was an error signing you up. Please try again.', 'error');
                }
            }
        });

        function showMessage(message, type) {
            waitlistMessage.textContent = message;
            waitlistMessage.className = 'mt-4 text-center font-medium';
            if (type === 'error') {
                waitlistMessage.classList.add('text-red-600', 'dark:text-red-400');
            } else {
                waitlistMessage.classList.add('text-green-600', 'dark:text-green-400');
            }

            // Clear message after 5 seconds
            setTimeout(() => {
                waitlistMessage.textContent = '';
                waitlistMessage.className = 'mt-4 text-center text-coffee-800 dark:text-coffee-200 font-medium';
            }, 5000);
        }

        function toggleFAQ(button) {
            const answer = button.nextElementSibling;
            const icon = button.querySelector('i');
            answer.classList.toggle('hidden');
            icon.classList.toggle('fa-chevron-up');
            icon.classList.toggle('fa-chevron-down');
        }

        document.addEventListener('DOMContentLoaded', () => {
            createFallingBeans();
            animateProgressBar();
        });
    </script>
</body>
</html>